<!DOCTYPE html>
<html>
  <head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=240">
	<title>重力加速度の表示</title>
	<style> p {font-size:100%;} </style>
  </head><body>
    <H3>iphone用</H3>
  <canvas id="aCanvas" width="200" height="200"></canvas>

  <script type="text/javascript">

  var x0 = 100, y0 = 100, xs = 0, ys = 0, zs = 0;
  var ctx = $("aCanvas").getContext("2d");
  window.addEventListener('devicemotion', function(event) {
  //  ctx.clearRect(xs-2, y0-2, 34, 34);
    ctx.clearRect(0, 0, 200, 200);
    var x = event.accelerationIncludingGravity.x;
	  var y = event.accelerationIncludingGravity.y;
	  var z = event.accelerationIncludingGravity.z;
	  var result1 = document.getElementById("result");
	  result.innerHTML = "<p>重力加速度(m/s^2)<br />"+
	  "X："+ x.toFixed(3) +"<br />" +
	  "Y："+ y.toFixed(3) +"<br />" + 
	  "Z："+ z.toFixed(3) +"</p>";

      var xx = x * 8 + x0;
      var yy = -y * 8 + y0;
      // xs = xx;

      ctx.strokeStyle = "blue"; // 輪郭の色

	  ctx.beginPath();
      ctx.lineWidth = 2; // 線幅
      ctx.arc(xx, yy, 10, 0, Math.PI*2, false);
	  ctx.stroke();

	  ctx.beginPath(); // パスの開始
      ctx.lineWidth = 1; // 線幅
 	  ctx.moveTo(x0, y0);
	  ctx.lineTo(xx, yy);
	  ctx.closePath(); // パスを閉じる
	  ctx.stroke(); // パスの描画
    // --------------------------------
    ctx.strokeStyle = "red"; // 輪郭の色
    if(x<-0.1 && y<-8.5) {
    ctx.beginPath(); // パスの開始
    ctx.lineWidth = 2; // 線幅
    ctx.moveTo(xx+10, yy-5);
    ctx.lineTo(xx+10-x*15, yy-5);
    ctx.lineTo(xx+10-x*15, yy-5-5);
    ctx.lineTo(xx+10-x*15+10, yy);
    ctx.lineTo(xx+10-x*15, yy+5+5);
    ctx.lineTo(xx+10-x*15, yy+5);
    ctx.lineTo(xx+10, yy+5);
    ctx.closePath(); // パスを閉じる
    ctx.stroke(); // パスの描画
    }
    if(x>0.1 && y<-8.5) {
    ctx.beginPath(); // パスの開始
    ctx.lineWidth = 2; // 線幅
    ctx.moveTo(xx-10, yy-5);
    ctx.lineTo(xx-10-x*15, yy-5);
    ctx.lineTo(xx-10-x*15, yy-5-5);
    ctx.lineTo(xx-10-x*15-10, yy);
    ctx.lineTo(xx-10-x*15, yy+5+5);
    ctx.lineTo(xx-10-x*15, yy+5);
    ctx.lineTo(xx-10, yy+5);
    ctx.closePath(); // パスを閉じる
    ctx.stroke(); // パスの描画
    }
    if(y<-0.1 && z<-9.0) {
    ctx.beginPath(); // パスの開始
    ctx.lineWidth = 2; // 線幅
    ctx.moveTo(xx-5, yy-10);
    ctx.lineTo(xx-5, yy-10+y*20);
    ctx.lineTo(xx-5-5, yy-10+y*20);
    ctx.lineTo(xx, yy-10+y*20-10);
    ctx.lineTo(xx+5+5, yy-10+y*20);
    ctx.lineTo(xx+5, yy-10+y*20);
    ctx.lineTo(xx+5, yy-10);
    ctx.closePath(); // パスを閉じる
    ctx.stroke(); // パスの描画
    }
    if(y>0.1 && z<-9.0) {
    ctx.beginPath(); // パスの開始
    ctx.lineWidth = 2; // 線幅
    ctx.moveTo(xx-5, yy+10);
    ctx.lineTo(xx-5, yy+10+y*20);
    ctx.lineTo(xx-5-5, yy+10+y*20);
    ctx.lineTo(xx, yy+10+y*20+10);
    ctx.lineTo(xx+5+5, yy+10+y*20);
    ctx.lineTo(xx+5, yy+10+y*20);
    ctx.lineTo(xx+5, yy+10);
    ctx.closePath(); // パスを閉じる
    ctx.stroke(); // パスの描画
    }


  });
  function $(id) { return document.getElementById(id); }
  </script>

  <div id="result"></div>
</body></html>



